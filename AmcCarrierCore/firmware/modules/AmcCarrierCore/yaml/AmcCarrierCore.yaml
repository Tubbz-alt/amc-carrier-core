##############################################################################
## This file is part of 'LCLS2 Common Carrier Core'.
## It is subject to the license terms in the LICENSE.txt file found in the 
## top-level directory of this distribution and at: 
##    https://confluence.slac.stanford.edu/display/ppareg/LICENSE.html. 
## No part of 'LCLS2 Common Carrier Core', including this file, 
## may be copied, modified, propagated, or distributed except according to 
## the terms contained in the LICENSE.txt file.
##############################################################################

include: AxiVersion.yaml
include: AxiEmpty.yaml
include: AxiSysMonUltraScale.yaml
include: AxiMicronN25Q.yaml
include: AxiSy56040.yaml
include: GenericMemory.yaml
include: AmcCarrierBsi.yaml
include: AmcCarrierTiming.yaml
include: AmcCarrierBsa.yaml
include: XauiReg.yaml
include: UdpEngineWrapper.yaml
include: RssiCore.yaml

AmcCarrierCore: &AmcCarrierCore 
  name: AmcCarrierCore
  description: AmcCarrierCore
  size: 0x80000000 # 2GB address space for core firmware
  ########## 
  registers:
  ########## 
    - address: 0x00000400
      name: AMC_CARRIER_CORE_VERSION_C
      mode: RO
      description: AMC Carrier Core Version Number
  ############
  peripherals:
  ############
    - <<: *AxiVersion
      address: 0x00000000
    ##################################################
    - <<: *AxiSysMonUltraScale
      address: 0x01000000
    ##################################################
    - <<: *AxiMicronN25Q
      address: 0x02000000  
    ##################################################
    - <<: *AxiSy56040
      address: 0x03000000      
    ##################################################
    - <<: *GenericMemory
      name: "Axi24LC64FT"
      address: 0x04000000       
      size: 0x2000       
      - <<: *MemoryArray
        nelms: 0x800
    ##################################################
    - <<: *GenericMemory
      name: "AxiCdcm6208"
      address: 0x05000000       
      size: 0x40       
      - <<: *MemoryArray
        nelms: 0x29      
    ##################################################
    - <<: *GenericMemory
      name: "DdrSpdMemory"
      address: 0x06000000       
      size: 0x100     
      description: Lookup tool at www.micron.com/spd
      - <<: *MemoryArray
        nelms: 0x40        
        nmode: RO # Read only
    ##################################################
    - <<: *GenericMemory
      name: "DdrTempSensor"
      address: 0x06000100       
      size: 0x100     
      - <<: *MemoryArray
        nelms: 0x40        
        nmode: RO # Read only
    ##################################################
    - <<: *AmcCarrierBsi
      address: 0x07000000      
    ##################################################  
    - <<: *AmcCarrierTiming
      address: 0x08000000      
    ##################################################
    - <<: *AmcCarrierBsa
      address: 0x09000000    
    ##################################################
    - <<: *XauiReg
      address: 0x0A000000  
    ##################################################
    - <<: *UdpEngineWrapper
      address: 0x0A010000 # ClientConfig[0]
    ##################################################
    - <<: *UdpEngineWrapper
      address: 0x0A010010 # ClientConfig[1] 
    ##################################################
    - <<: *RssiCore
      address: 0x0A020000 # Server RSSI’s Software    
    ##################################################
    - <<: *RssiCore
      address: 0x0A030000 # Server RSSI’s BP_MSG[0]     
    ##################################################
    - <<: *RssiCore
      address: 0x0A030400 # Client RSSI’s BP_MSG[0]    
    ##################################################
    - <<: *RssiCore
      address: 0x0A030800 # Server RSSI’s BP_MSG[1]     
    ##################################################
    - <<: *RssiCore
      address: 0x0A030C00 # Client RSSI’s BP_MSG[1]        
    ################################################## 
    - <<: *AxiEmpty
      name: "DdrPhy"  # AxiEmpty is a placeholder
      address: 0x0B000000      
    ##################################################   
    - <<: *AxiEmpty
      name: "MpsPhy"  # AxiEmpty is a placeholder
      address: 0x0C000000      
    ##################################################     
    